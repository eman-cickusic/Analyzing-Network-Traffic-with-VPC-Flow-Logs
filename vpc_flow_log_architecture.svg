<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="500" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle" fill="#202124">VPC Flow Logs Architecture</text>
  
  <!-- Cloud outline -->
  <path d="M50,100 Q100,50 150,100 Q200,50 250,100 Q300,50 350,100 Q400,50 450,100 Q500,50 550,100 Q600,50 650,100 Q700,50 750,100 L750,400 Q700,450 650,400 Q600,450 550,400 Q500,450 450,400 Q400,450 350,400 Q300,450 250,400 Q200,450 150,400 Q100,450 50,400 Z" fill="#e8f0fe" stroke="#4285f4" stroke-width="2"/>
  
  <!-- User icon -->
  <circle cx="100" cy="180" r="30" fill="#dadce0" stroke="#5f6368" stroke-width="2"/>
  <circle cx="100" cy="165" r="10" fill="#5f6368"/>
  <path d="M80,195 Q100,170 120,195 L120,210 Q100,220 80,210 Z" fill="#5f6368"/>
  <text x="100" y="240" font-family="Arial" font-size="14" text-anchor="middle" fill="#202124">External Users</text>
  
  <!-- VM instance -->
  <rect x="220" y="150" width="120" height="80" rx="5" ry="5" fill="#ffffff" stroke="#4285f4" stroke-width="2"/>
  <rect x="220" y="150" width="120" height="25" rx="5" ry="5" fill="#4285f4"/>
  <text x="280" y="167" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">VM Instance</text>
  <text x="280" y="190" font-family="Arial" font-size="12" text-anchor="middle" fill="#202124">web-server</text>
  <text x="280" y="210" font-family="Arial" font-size="12" text-anchor="middle" fill="#202124">Apache</text>
  
  <!-- VPC network -->
  <rect x="100" y="320" width="360" height="60" rx="5" ry="5" fill="#ffffff" stroke="#4285f4" stroke-width="2"/>
  <text x="280" y="355" font-family="Arial" font-size="14" text-anchor="middle" fill="#202124">VPC Network (vpc-net)</text>
  
  <!-- VPC Flow Logs -->
  <rect x="400" y="150" width="120" height="80" rx="5" ry="5" fill="#ffffff" stroke="#4285f4" stroke-width="2"/>
  <rect x="400" y="150" width="120" height="25" rx="5" ry="5" fill="#4285f4"/>
  <text x="460" y="167" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">Flow Logs</text>
  <text x="460" y="190" font-family="Arial" font-size="10" text-anchor="middle" fill="#202124">Aggregation: 30s</text>
  <text x="460" y="210" font-family="Arial" font-size="10" text-anchor="middle" fill="#202124">Sampling: 25%</text>
  
  <!-- BigQuery -->
  <rect x="580" y="150" width="120" height="80" rx="5" ry="5" fill="#ffffff" stroke="#4285f4" stroke-width="2"/>
  <rect x="580" y="150" width="120" height="25" rx="5" ry="5" fill="#4285f4"/>
  <text x="640" y="167" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">BigQuery</text>
  <text x="640" y="190" font-family="Arial" font-size="12" text-anchor="middle" fill="#202124">Dataset:</text>
  <text x="640" y="210" font-family="Arial" font-size="12" text-anchor="middle" fill="#202124">bq_vpcflows</text>
  
  <!-- Subnet -->
  <rect x="170" y="260" width="220" height="40" rx="5" ry="5" fill="#ffffff" stroke="#4285f4" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="280" y="285" font-family="Arial" font-size="12" text-anchor="middle" fill="#202124">Subnet (vpc-subnet: 10.1.3.0/24)</text>
  
  <!-- Firewall -->
  <rect x="500" y="320" width="180" height="60" rx="5" ry="5" fill="#ffffff" stroke="#ea4335" stroke-width="2"/>
  <text x="590" y="345" font-family="Arial" font-size="14" text-anchor="middle" fill="#202124">Firewall Rule</text>
  <text x="590" y="365" font-family="Arial" font-size="12" text-anchor="middle" fill="#202124">allow-http-ssh (TCP 80,22)</text>
  
  <!-- Connections -->
  <!-- User to VM -->
  <path d="M130,180 L220,180" stroke="#5f6368" stroke-width="2" marker-end="url(#arrow)"/>
  <!-- VM to Flow Logs -->
  <path d="M340,180 L400,180" stroke="#4285f4" stroke-width="2" marker-end="url(#arrow)"/>
  <!-- Flow Logs to BigQuery -->
  <path d="M520,180 L580,180" stroke="#4285f4" stroke-width="2" marker-end="url(#arrow)"/>
  <!-- VM to Subnet